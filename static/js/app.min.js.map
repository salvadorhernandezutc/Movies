{"version":3,"sources":["forms.js","getdata.js","icons.js","toast.js"],"names":["$","document","ready","submit","event","preventDefault","this","attr","form","formData","FormData","jsonData","Object","fromEntries","entries","ajax","url","type","data","JSON","stringify","processData","contentType","dataType","success","response","reset","toast","icon","title","fullname","time","position","onClose","window","location","href","error","xhr","status","errorData","responseJSON","json","message","console","login","getLevels","insertLevel","insertMovie","click","inputPass","toggleClass","blur","min","val","levelsContentTable","length","moviesContentTable","empty","forEach","element","append","ClasificacionId","ClasificacionDesc","getMovies","log","PeliculaId","Nombre","Director","Duracion","Genero","FechaLanzamiento","indexIcons","container","fillIcons","containerWidth","width","containerHeight","height","iconSize","totalIcons","Math","ceil","i","iconClass","options","settings","extend","Toast","Swal","mixin","showConfirmButton","showCloseButton","timer","timerProgressBar","didOpen","onmouseenter","stopTimer","onmouseleave","resumeTimer","didClose","fire","on","clearTimeout","fillIconsTimeout","setTimeout"],"mappings":"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","file":"app.min.js","sourcesContent":["$(document).ready(function () {\r\n    $(\"form\").submit(function (event) {\r\n        event.preventDefault();\r\n        const actionForm = $(this).attr(\"action\");\r\n\r\n        switch (actionForm) {\r\n            case \"login\":\r\n                login(this);\r\n                break;\r\n            case \"insertLevel\":\r\n                insertLevel(this);\r\n                break;\r\n            case \"insertMovie\":\r\n                insertMovie(this);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    });\r\n\r\n    function login(form) {\r\n        const formData = new FormData(form);\r\n        const jsonData = Object.fromEntries(formData.entries());\r\n\r\n        $.ajax({\r\n            url: \"php/login.php\",\r\n            type: \"POST\",\r\n            data: JSON.stringify(jsonData),\r\n            processData: false,\r\n            contentType: \"application/json\",\r\n            dataType: \"json\",\r\n            success: function (response) {\r\n                $(form)[0].reset();\r\n\r\n                toast({\r\n                    icon: \"success\",\r\n                    title: `Se inicio sesion correctamente <br> Bienvenido ${response.fullname}`,\r\n                    time: 2000,\r\n                    position: \"top\",\r\n                    onClose: function () {\r\n                        window.location.href = \"dashboard.php\";\r\n                    },\r\n                });\r\n            },\r\n            error: function (xhr, status, error, response) {\r\n                const errorData = xhr.responseJSON.json || {};\r\n                toast({\r\n                    icon: \"error\",\r\n                    title: `Error al intentar iniciar sesión. <br><br> ${errorData.message || \"Error desconocido\"} <br> Código ${xhr.status}`,\r\n                    time: 5000,\r\n                    position: \"center\",\r\n                });\r\n                console.error(\"--- Este es el error resultante de ajax ---\");\r\n                console.error(xhr.status, errorData);\r\n            },\r\n        });\r\n    }\r\n\r\n    function insertLevel(form) {\r\n        const formData = new FormData(form);\r\n        const jsonData = Object.fromEntries(formData.entries());\r\n\r\n        $.ajax({\r\n            url: \"php/insertLevel.php\",\r\n            type: \"POST\",\r\n            data: JSON.stringify(jsonData),\r\n            processData: false,\r\n            contentType: \"application/json\",\r\n            dataType: \"json\",\r\n            success: function (response) {\r\n                $(form)[0].reset();\r\n                getLevels();\r\n\r\n                toast({\r\n                    icon: \"success\",\r\n                    title: `Se registro una clasificacion correctamente`,\r\n                    time: 2000,\r\n                    position: \"top-end\",\r\n                });\r\n            },\r\n            error: function (xhr, status, error, response) {\r\n                const errorData = xhr.responseJSON.json || {};\r\n                toast({\r\n                    icon: \"error\",\r\n                    title: `Error al intentar registrar la clasificacion. <br><br> ${errorData.message || \"Error desconocido\"} <br> Código ${xhr.status}`,\r\n                    time: 5000,\r\n                    position: \"center\",\r\n                });\r\n                console.error(\"--- Este es el error resultante de ajax ---\");\r\n                console.error(xhr.status, errorData);\r\n            },\r\n        });\r\n    }\r\n\r\n    function insertMovie(form) {\r\n        const formData = new FormData(form);\r\n        const jsonData = Object.fromEntries(formData.entries());\r\n\r\n        $.ajax({\r\n            url: \"php/insertMovie.php\",\r\n            type: \"POST\",\r\n            data: JSON.stringify(jsonData),\r\n            processData: false,\r\n            contentType: \"application/json\",\r\n            dataType: \"json\",\r\n            success: function (response) {\r\n                $(form)[0].reset();\r\n\r\n                toast({\r\n                    icon: \"success\",\r\n                    title: `Se registro una pelicula correctamente`,\r\n                    time: 2000,\r\n                    position: \"top-end\",\r\n                });\r\n            },\r\n            error: function (xhr, status, error, response) {\r\n                const errorData = xhr.responseJSON.json || {};\r\n                toast({\r\n                    icon: \"error\",\r\n                    title: `Error al intentar registrar la pelicula. <br><br> ${errorData.message || \"Error desconocido\"} <br> Código ${xhr.status}`,\r\n                    time: 5000,\r\n                    position: \"center\",\r\n                });\r\n                console.error(\"--- Este es el error resultante de ajax ---\");\r\n                console.error(xhr.status, errorData);\r\n            },\r\n        });\r\n    }\r\n\r\n    $(\"#btnShowPass\").click(function () {\r\n        const inputPass = $(this).data(\"input\");\r\n        const type = $(inputPass).attr(\"type\") === \"text\" ? \"password\" : \"text\";\r\n\r\n        $(inputPass).attr(\"type\", type);\r\n        $(this).toggleClass(\"fa-eye fa-eye-slash\");\r\n    });\r\n\r\n    $(\"input[type='number']\").blur(function () {\r\n        const min = $(this).attr(\"min\");\r\n        const value = $(this).val();\r\n        if (value < min) {\r\n            $(this).val(min);\r\n        }\r\n    });\r\n});\r\n","\r\n    const levelsContentTable = $(\"#levelsTableBody\");\r\n    if (levelsContentTable.length === 1) {\r\n        getLevels();\r\n    }\r\n    const moviesContentTable = $(\"#moviesTableBody\");\r\n    if (moviesContentTable.length === 1) {\r\n        getMovies();\r\n    }\r\n\r\n    function getLevels() {\r\n        $.ajax({\r\n            url: \"php/getLevels.php\",\r\n            type: \"GET\",\r\n            contentType: \"application/json\",\r\n            dataType: \"json\",\r\n            success: function (response) {\r\n                const data = response.data;\r\n                levelsContentTable.empty();\r\n\r\n                data.forEach((element) => {\r\n                    levelsContentTable.append(`<tr> <td>${element.ClasificacionId}</td> <td>${element.ClasificacionDesc}</td> <td class=\"d-flex gap-1\"><button class=\"btn btn-icon btn-detail\" data-id=\"${element.ClasificacionId}\"><i class=\"fa-solid fa-pen\"></i></button><button class=\"btn btn-icon btn-danger\" data-id=\"${element.ClasificacionId}\"><i class=\"fa-solid fa-trash-can\"></i></button></td> </tr>`);\r\n                });\r\n            },\r\n            error: function (xhr, status, error, response) {\r\n                const errorData = xhr.responseJSON.json || {};\r\n                toast({\r\n                    icon: \"error\",\r\n                    title: `Error al intentar registrar la clasificacion. <br><br> ${errorData.message || \"Error desconocido\"} <br> Código ${xhr.status}`,\r\n                    time: 5000,\r\n                    position: \"center\",\r\n                });\r\n                console.error(\"--- Este es el error resultante de ajax ---\");\r\n                console.error(xhr.status, errorData);\r\n            },\r\n        });\r\n    }\r\n\r\n    function getMovies() {\r\n        $.ajax({\r\n            url: \"php/getMovies.php\",\r\n            type: \"GET\",\r\n            contentType: \"application/json\",\r\n            dataType: \"json\",\r\n            success: function (response) {\r\n                console.log(response);\r\n                \r\n                const data = response.data;\r\n                moviesContentTable.empty();\r\n\r\n                data.forEach((element) => {\r\n                    moviesContentTable.append(`<tr><td>${element.PeliculaId}</td><td>${element.Nombre}</td><td>${element.Director}</td><td>${element.Duracion}</td><td>${element.Genero}</td><td>${element.FechaLanzamiento}</td><td>${element.ClasificacionId}</td><td class=\"d-flex gap-1\"><button class=\"btn btn-icon btn-detail\" data-id=\"${element.PeliculaId}\"><i class=\"fa-solid fa-pen\"></i></button><button class=\"btn btn-icon btn-danger\" data-id=\"${element.PeliculaId}\"><i class=\"fa-solid fa-trash-can\"></i></button></td></tr>`);\r\n                });\r\n            },\r\n            error: function (xhr, status, error, response) {\r\n                const errorData = xhr.responseJSON.json || {};\r\n                toast({\r\n                    icon: \"error\",\r\n                    title: `Error al intentar registrar la Peliculas. <br><br> ${errorData.message || \"Error desconocido\"} <br> Código ${xhr.status}`,\r\n                    time: 5000,\r\n                    position: \"center\",\r\n                });\r\n                console.error(\"--- Este es el error resultante de ajax ---\");\r\n                console.error(xhr.status, errorData);\r\n            },\r\n        });\r\n    }\r\n\r\n","const indexIcons = [\"fa-clapperboard\", \"fa-compact-disc\", \"fa-film\", \"fa-ticket\", \"fa-ticket-simple\", \"fa-video\"];\r\nconst container = $(\"#indexIcons\");\r\n\r\nfunction fillIcons() {\r\n    container.empty();\r\n\r\n    const containerWidth = container.width();\r\n    const containerHeight = container.height();\r\n    // const iconSize = 80; // mismo tamaño que en grid-template\r\n    const iconSize = container.data(\"icon-size\") || 80;\r\n\r\n    const cols = Math.ceil(containerWidth / iconSize);\r\n    const rows = Math.ceil(containerHeight / iconSize);\r\n    const totalIcons = cols * rows;\r\n\r\n    for (let i = 0; i < totalIcons; i++) {\r\n        const iconClass = indexIcons[i % indexIcons.length];\r\n        container.append(`<i class=\"fas ${iconClass}\"></i>`);\r\n    }\r\n}\r\n\r\nfillIcons();\r\n\r\n// Vuelve a llenar si cambia el tamaño de la pantalla\r\n$(window).on(\"resize\", function () {\r\n    clearTimeout(window.fillIconsTimeout);\r\n    window.fillIconsTimeout = setTimeout(fillIcons, 100);\r\n});\r\n","// Funcion de Alertas con sweetaler2\r\nfunction toast(options) {\r\n    const settings = $.extend(\r\n        {\r\n            icon: \"info\",\r\n            title: \"The title\",\r\n            time: 3000,\r\n            position: \"top-end\",\r\n            onClose: null,\r\n        },\r\n        options\r\n    );\r\n\r\n    const Toast = Swal.mixin({\r\n        toast: true,\r\n        position: settings.position,\r\n        showConfirmButton: false,\r\n        showCloseButton: true,\r\n        timer: settings.time,\r\n        timerProgressBar: true,\r\n        didOpen: (toast) => {\r\n            toast.onmouseenter = Swal.stopTimer;\r\n            toast.onmouseleave = Swal.resumeTimer;\r\n        },\r\n        didClose: () => {\r\n            if (typeof settings.onClose === \"function\") {\r\n                settings.onClose();\r\n            }\r\n        },\r\n    });\r\n    Toast.fire({\r\n        icon: settings.icon,\r\n        title: settings.title,\r\n    });\r\n}\r\n"]}