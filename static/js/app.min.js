$(document).ready(function(){$("form").submit(function(t){t.preventDefault();switch($(this).attr("action")){case"login":!function(t){const e=new FormData(t),o=Object.fromEntries(e.entries());$.ajax({url:"php/login.php",type:"POST",data:JSON.stringify(o),processData:!1,contentType:"application/json",dataType:"json",success:function(e){$(t)[0].reset(),toast({icon:"success",title:`Se inicio sesion correctamente <br> Bienvenido ${e.fullname}`,time:2e3,position:"top",onClose:function(){window.location.href="dashboard.php"}})},error:function(t,e,o,n){const s=t.responseJSON.json||{};toast({icon:"error",title:`Error al intentar iniciar sesión. <br><br> ${s.message||"Error desconocido"} <br> Código ${t.status}`,time:5e3,position:"center"}),console.error("--- Este es el error resultante de ajax ---"),console.error(t.status,s)}})}(this);break;case"insertLevel":!function(t){const e=new FormData(t),o=Object.fromEntries(e.entries());$.ajax({url:"php/insertLevel.php",type:"POST",data:JSON.stringify(o),processData:!1,contentType:"application/json",dataType:"json",success:function(e){$(t)[0].reset(),getLevels(),toast({icon:"success",title:"Se registro una clasificacion correctamente",time:2e3,position:"top-end"})},error:function(t,e,o,n){const s=t.responseJSON.json||{};toast({icon:"error",title:`Error al intentar registrar la clasificacion. <br><br> ${s.message||"Error desconocido"} <br> Código ${t.status}`,time:5e3,position:"center"}),console.error("--- Este es el error resultante de ajax ---"),console.error(t.status,s)}})}(this);break;case"insertMovie":!function(t){const e=new FormData(t),o=Object.fromEntries(e.entries());$.ajax({url:"php/insertMovie.php",type:"POST",data:JSON.stringify(o),processData:!1,contentType:"application/json",dataType:"json",success:function(e){$(t)[0].reset(),toast({icon:"success",title:"Se registro una pelicula correctamente",time:2e3,position:"top-end"})},error:function(t,e,o,n){const s=t.responseJSON.json||{};toast({icon:"error",title:`Error al intentar registrar la pelicula. <br><br> ${s.message||"Error desconocido"} <br> Código ${t.status}`,time:5e3,position:"center"}),console.error("--- Este es el error resultante de ajax ---"),console.error(t.status,s)}})}(this)}}),$("#btnShowPass").click(function(){const t=$(this).data("input"),e="text"===$(t).attr("type")?"password":"text";$(t).attr("type",e),$(this).toggleClass("fa-eye fa-eye-slash")}),$("input[type='number']").blur(function(){const t=$(this).attr("min");$(this).val()<t&&$(this).val(t)})});const levelsContentTable=$("#levelsTableBody");1===levelsContentTable.length&&getLevels();const moviesContentTable=$("#moviesTableBody");function getLevels(){$.ajax({url:"php/getLevels.php",type:"GET",contentType:"application/json",dataType:"json",success:function(t){const e=t.data;levelsContentTable.empty(),e.forEach(t=>{levelsContentTable.append(`<tr> <td>${t.ClasificacionId}</td> <td>${t.ClasificacionDesc}</td> <td class="d-flex gap-1"><button class="btn btn-icon btn-detail" data-id="${t.ClasificacionId}"><i class="fa-solid fa-pen"></i></button><button class="btn btn-icon btn-danger" data-id="${t.ClasificacionId}"><i class="fa-solid fa-trash-can"></i></button></td> </tr>`)})},error:function(t,e,o,n){const s=t.responseJSON.json||{};toast({icon:"error",title:`Error al intentar registrar la clasificacion. <br><br> ${s.message||"Error desconocido"} <br> Código ${t.status}`,time:5e3,position:"center"}),console.error("--- Este es el error resultante de ajax ---"),console.error(t.status,s)}})}function getMovies(){$.ajax({url:"php/getMovies.php",type:"GET",contentType:"application/json",dataType:"json",success:function(t){console.log(t);const e=t.data;moviesContentTable.empty(),e.forEach(t=>{moviesContentTable.append(`<tr><td>${t.PeliculaId}</td><td>${t.Nombre}</td><td>${t.Director}</td><td>${t.Duracion}</td><td>${t.Genero}</td><td>${t.FechaLanzamiento}</td><td>${t.ClasificacionId}</td><td class="d-flex gap-1"><button class="btn btn-icon btn-detail" data-id="${t.PeliculaId}"><i class="fa-solid fa-pen"></i></button><button class="btn btn-icon btn-danger" data-id="${t.PeliculaId}"><i class="fa-solid fa-trash-can"></i></button></td></tr>`)})},error:function(t,e,o,n){const s=t.responseJSON.json||{};toast({icon:"error",title:`Error al intentar registrar la Peliculas. <br><br> ${s.message||"Error desconocido"} <br> Código ${t.status}`,time:5e3,position:"center"}),console.error("--- Este es el error resultante de ajax ---"),console.error(t.status,s)}})}1===moviesContentTable.length&&getMovies();const indexIcons=["fa-clapperboard","fa-compact-disc","fa-film","fa-ticket","fa-ticket-simple","fa-video"],container=$("#indexIcons");function fillIcons(){container.empty();const t=container.width(),e=container.height(),o=container.data("icon-size")||80,n=Math.ceil(t/o)*Math.ceil(e/o);for(let t=0;t<n;t++){const e=indexIcons[t%indexIcons.length];container.append(`<i class="fas ${e}"></i>`)}}function toast(t){const e=$.extend({icon:"info",title:"The title",time:3e3,position:"top-end",onClose:null},t),o=Swal.mixin({toast:!0,position:e.position,showConfirmButton:!1,showCloseButton:!0,timer:e.time,timerProgressBar:!0,didOpen:t=>{t.onmouseenter=Swal.stopTimer,t.onmouseleave=Swal.resumeTimer},didClose:()=>{"function"==typeof e.onClose&&e.onClose()}});o.fire({icon:e.icon,title:e.title})}fillIcons(),$(window).on("resize",function(){clearTimeout(window.fillIconsTimeout),window.fillIconsTimeout=setTimeout(fillIcons,100)});//# sourceMappingURL=app.min.js.map
